<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    
    <t t-name="MulitUOMWidget" owl="1">
        <div role="dialog" class="modal-dialog">
            <Draggable>
                <div class="popup popup-textarea">
                    <header class="title drag-handle">
                        <t t-esc="props.title" />
                    </header>
                    <main class="body" style="height: 270px;margin: 0px;">
                    <t t-if="props.modifiers_list">
                        <style>
                            .multi_uom_button{
                                transition: all 150ms linear;
                                background: rgb(230,230,230);
                                cursor: pointer;
                            }
                            .multi_uom_button:nth-child(even) {
                                background: rgb(247,247,247);
                            }
                        </style>
                        <div style="height: 277px;overflow: scroll;">
                            <table style="font-size: 16px;width: 100%;line-height: 40px;">
                                <thead>
                                    <tr class='label' style="background: rgb(247,247,247);">
                                        <th>Uom</th>
                                        <th>Price</th>
                                        <th>Ratio</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="props.modifiers_list" t-as="wv_uom" t-key="wv_uom.id">
                                        <tr class="multi_uom_button" t-on-click="() => this.trigger('multi_uom_button', [wv_uom.multi_uom_id[0],wv_uom.price])">
                                            <td><t t-esc="wv_uom.uom_name"/></td>
                                            <td><t t-esc="env.pos.format_currency(wv_uom.price)"/></td>
                                            <td><t t-esc="env.pos.units_by_id[wv_uom.multi_uom_id[0]].factor_inv"/> <t t-esc="wv_uom.multi_uom_id[1]"/></td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </t>
                    </main>
                    <footer class="footer">
                        <div class="button cancel" t-on-click="cancel">
                            <t t-esc="props.cancelText" />
                        </div>
                    </footer>
                </div>
            </Draggable>
        </div>
    </t>
    <t t-name="ChangeUOMButton" owl="1">
        <div class="control-button">
            <i class='fa fa-tag' /> Change UOM
        </div>
    </t>
    <t t-name="Orderline" t-inherit="point_of_sale.Orderline" t-inherit-mode="extension" owl="1">
        <xpath expr="//span[hasclass('product-name')]" position="replace">
            <span class="product-name">
                <t t-if="props.line.uom_name == ''">
                    <t t-esc="props.line.get_full_product_name()"/>
                </t>
                <t t-if="props.line.uom_name != ''">
                    <t t-esc="props.line.uom_name"/>
                </t>
                <span> </span>
                <t t-if="props.line.get_product().tracking!=='none' &amp;&amp; (env.pos.picking_type.use_create_lots || env.pos.picking_type.use_existing_lots)">
                    <t t-if="props.line.has_valid_product_lot()">
                        <i  t-on-click.stop="lotIconClicked"
                            class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_green"
                            aria-label="Valid product lot"
                            role="img"
                            title="Valid product lot"
                        />
                    </t>
                    <t t-else="">
                        <i  t-on-click.stop="lotIconClicked"
                            class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_red"
                            aria-label="Invalid product lot"
                            role="img"
                            title="Invalid product lot"
                        />
                    </t>
                </t>
            </span>
        </xpath>
    </t>
</templates>
